FROM node:12-buster-slim

ARG VERSION=3.0.0.5
ENV DEBIAN_FRONTEND noninteractive

RUN apt-get update && apt-get install -y openjdk-11-jdk-headless curl unzip \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

RUN cd tmp && curl -sL https://github.com/yahoo/CMAK/archive/$VERSION.tar.gz | tar zx \
  && cd CMAK-${VERSION} \
  && ./sbt clean dist && rm -rf /tmp/CMAK-${VERSION}